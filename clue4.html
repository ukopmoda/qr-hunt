<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clue 4 â€” Reflection</title>
  <style>
    body{background:#020213;color:#fff;font-family:system-ui;padding:22px}
    .card{max-width:720px;margin:18px auto;padding:20px;border-radius:12px;background:#0a0a10}
    h1{color:#f0a7ff;margin:0}
    p{color:#d0d0d0}
    .btn{padding:10px 12px;background:#f0a7ff;color:#060;border-radius:8px;text-decoration:none;font-weight:700}
  </style>
</head>
<body>
  <div class="card">
    <h1>Clue 4 â€” The Reflection</h1>
    <p>ðŸªž Maybe Livingston was never a place. Maybe itâ€™s a memory â€” something we made real by believing in it.</p>

    <!-- Optional: your short reflective video -->
    <!-- <iframe class="video" src="https://www.youtube.com/embed/YOUR_VIDEO_ID?rel=0&autoplay=1" allow="autoplay"></iframe> -->

    <p><strong>Clue #4:</strong> Go where we'd go if we wanted to talk away from everyone else.</p>

    <div style="margin-top:12px">
      <a class="btn" href="final.html">Reveal the truth âžœ</a>
    </div>
  </div>

<script>
/* CONFIG â€” replace with your form info */
const FORM_URL = "https://docs.google.com/forms/d/e/FORM_ID/formResponse";
const ENTRY_PAGE = "entry.1234567890";
const ENTRY_TIMESTAMP = "entry.0987654321";
/* ============================== */

const PAGE_INDEX = 4;
const PAGE_NAME = "Clue 4 â€” The Reflection";

function nowISO(){ return new Date().toISOString(); }
function getProg(){return parseInt(localStorage.getItem('hunt_progress')||'0',10);}
function allowed(){ return getProg() >= PAGE_INDEX-1; }
function logVisit(){
  if(localStorage.getItem('logged_'+PAGE_INDEX)) return;
  localStorage.setItem('logged_'+PAGE_INDEX, nowISO());
  const timestamp = new Date().toLocaleString();
  fetch(FORM_URL + "?" + ENTRY_PAGE + "=" + encodeURIComponent(PAGE_NAME) + "&" + ENTRY_TIMESTAMP + "=" + encodeURIComponent(timestamp), { mode:'no-cors' });
}
(function init(){
  if(!allowed()){
    document.body.innerHTML = `<div style="padding:28px;color:#ffd2a6">
      <h2 style="color:#ff9a66">Not yet â€” follow the clues</h2>
      <p>You need to complete the previous clues first.</p>
      <a href="index.html" style="padding:10px 12px;background:#f0a7ff;color:#011;border-radius:8px;text-decoration:none;font-weight:700">Go to start</a>
    </div>`;
    return;
  }
  if(PAGE_INDEX > getProg()) localStorage.setItem('hunt_progress', PAGE_INDEX.toString());
  logVisit();

  // header timer
  const head = document.createElement('div');
  head.style.display='flex';head.style.justifyContent='space-between';head.style.alignItems='center';head.style.margin='0 0 12px 0';
  head.innerHTML = `<div style="font-weight:700">Mystery of Livingston</div><div id="globalTimer" style="font-weight:700">24:00:00</div>`;
  document.body.insertBefore(head, document.body.firstChild);
  function updateTimer(){
    const start = parseInt(localStorage.getItem('hunt_start')||'0',10);
    const el = document.getElementById('globalTimer');
    if(!start){ el.textContent = "24:00:00"; return; }
    const end = start + 24*3600*1000;
    const rem = Math.max(0, end - Date.now());
    const hh = Math.floor(rem/3600000).toString().padStart(2,'0');
    const mm = Math.floor((rem%3600000)/60000).toString().padStart(2,'0');
    const ss = Math.floor((rem%60000)/1000).toString().padStart(2,'0');
    el.textContent = `${hh}:${mm}:${ss}`;
  }
  updateTimer(); setInterval(updateTimer,1000);
})();
</script>
</body>
</html>
