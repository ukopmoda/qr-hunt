<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clue 1 â€” Gates Hall</title>
  <style>
    :root { --bg:#07060a; --accent:#ff6b6b; --muted:#bdbdbd; }
    body{background:var(--bg);color:#fff;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      margin:0;padding:24px;display:flex;flex-direction:column;min-height:100vh;gap:18px}
    header{display:flex;justify-content:space-between;align-items:center}
    h1{color:var(--accent);margin:0;font-size:1.6rem}
    p{margin:0;color:var(--muted)}
    main{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px}
    .card{background:#0d0c10;padding:18px;border-radius:12px;max-width:680px;width:100%;box-shadow:0 6px 30px rgba(0,0,0,.6)}
    .timer{font-size:1.25rem;color:#ffd27a}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:#111;text-decoration:none;font-weight:600;cursor:pointer;border:none}
    iframe.video{width:100%;height:220px;border-radius:8px;border:0}
    small.muted{color: #9a9a9a}
  </style>
</head>
<body>
  <header>
    <h1>The Mystery of Livingston</h1>
    <div class="timer" id="global-timer">24:00:00</div>
  </header>

  <main>
    <div class="card">
      <h2>Start â€” Gates Hall</h2>
      <p>ðŸ•’ The clock is ticking â€” 24 hours to uncover the truth.<br>
      We met here, at Gates Hall. You once told me about a place called <em>Livingston</em>. Is it real?</p>

      <!-- Optional: embed a short video of you here (use YouTube embed link) -->
      <!-- <iframe class="video" src="https://www.youtube.com/embed/YOUR_VIDEO_ID?rel=0&autoplay=1" allow="autoplay; encrypted-media" allowfullscreen></iframe> -->

      <p><strong>Clue #1:</strong> Start where the smell of caffeine lingers and ideas never sleep.</p>

      <div style="display:flex;gap:12px;margin-top:12px;flex-wrap:wrap">
        <a class="btn" id="next-btn" href="clue2.html?start=true">I'm ready â€” Find clue #2</a>
        <button class="btn" id="reset-btn">Reset Timer</button>
        <button class="btn" id="submit-btn">Log Clue Manually</button>
        <small class="muted">Timer starts when page is opened via QR code.</small>
      </div>
    </div>

    <p style="font-size:.9rem;color:#9a9a9a;max-width:680px;">
      (This page logs each visit automatically to my private sheet.)
    </p>
  </main>

<script>
/* ===== CONFIG ===== */
const FORM_URL = "https://docs.google.com/forms/d/e/FORM_ID/formResponse"; // replace with your form
const ENTRY_PAGE = "entry.1234567890";       // replace with your form entry
const ENTRY_TIMESTAMP = "entry.0987654321";  // replace with your form entry
const PAGE_INDEX = 1;
const PAGE_NAME = "Clue 1 â€” Gates Hall";
const TOTAL_HOURS = 24;

/* ===== HELPERS ===== */
function nowISO(){ return new Date().toISOString(); }
function saveStartIfNeeded(){
  if(!localStorage.getItem('hunt_start')) localStorage.setItem('hunt_start', Date.now().toString());
}
function updateProgress(){
  let progress = parseInt(localStorage.getItem('hunt_progress')||'0',10);
  if(PAGE_INDEX > progress) localStorage.setItem('hunt_progress', PAGE_INDEX.toString());
}
function logVisit(){
  if(localStorage.getItem('logged_'+PAGE_INDEX)) return;
  localStorage.setItem('logged_'+PAGE_INDEX, nowISO());
  const timestamp = new Date().toLocaleString();
  const url = FORM_URL + "?" + ENTRY_PAGE + "=" + encodeURIComponent(PAGE_NAME) + "&" + ENTRY_TIMESTAMP + "=" + encodeURIComponent(timestamp);
  fetch(url, {mode:'no-cors'}).catch(()=>{});
}

/* ===== TIMER ===== */
let timer;
function updateTimerUI(){
  const start = parseInt(localStorage.getItem('hunt_start')||'0',10);
  const el = document.getElementById('global-timer');
  if(!start){ el.textContent = "24:00:00"; return; }
  const end = start + TOTAL_HOURS*3600*1000;
  const rem = Math.max(0, end - Date.now());
  const hh = Math.floor(rem/3600000).toString().padStart(2,'0');
  const mm = Math.floor((rem%3600000)/60000).toString().padStart(2,'0');
  const ss = Math.floor((rem%60000)/1000).toString().padStart(2,'0');
  el.textContent = `${hh}:${mm}:${ss}`;
}
function resetTimer(){
  localStorage.setItem('hunt_start', Date.now().toString());
  updateTimerUI();
}
document.getElementById('reset-btn').addEventListener('click', resetTimer);

/* ===== MANUAL SUBMIT ===== */
document.getElementById('submit-btn').addEventListener('click', ()=>{
  const timestamp = new Date().toLocaleString();
  const url = FORM_URL + "?" + ENTRY_PAGE + "=" + encodeURIComponent(PAGE_NAME) + "&" + ENTRY_TIMESTAMP + "=" + encodeURIComponent(timestamp);
  fetch(url,{mode:'no-cors'}).then(()=>alert('Clue logged!')).catch(()=>alert('Logging failed.'));
});

/* ===== INIT ===== */
(function init(){
  const urlParams = new URLSearchParams(window.location.search);
  if(urlParams.get("start")==="true") saveStartIfNeeded();
  updateProgress();
  logVisit();
  updateTimerUI();
  setInterval(updateTimerUI, 1000);
})();
</script>

</body>
</html>
