<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Final ‚Äî The Truth</title>
  <style>
    body{background:#071018;color:#fff;font-family:system-ui;padding:22px}
    .card{max-width:780px;margin:18px auto;padding:20px;border-radius:12px;background:linear-gradient(180deg,#08121a, #071018)}
    h1{color:#ffd27a;margin:0}
    p{color:#ddd}
    .gift{margin-top:12px;padding:14px;background:#0c1720;border-radius:10px}
    .btn{padding:10px 12px;border-radius:8px;background:#ffd27a;color:#041;text-decoration:none;font-weight:800}
  </style>
</head>
<body>
  <div class="card">
    <h1>The Finale</h1>
    <p>üéÅ Congratulations, Detective. You've proven Livingston is real ‚Äî or that we made it real just by looking for it.</p>

    <!-- Optional: embed a personal video message -->
    <!-- <iframe class="video" src="https://www.youtube.com/embed/YOUR_VIDEO_ID?rel=0&autoplay=1" allow="autoplay; encrypted-media" style="width:100%;height:260px;border:0;border-radius:8px"></iframe> -->

    <div class="gift">
      <p><strong>Gift hint:</strong> It's nearby ‚Äî look behind the place where we first laughed together. You'll know it when you see it.</p>
      <p style="margin-top:10px">If you'd rather I hand it to you in person, come find me ‚Äî otherwise the gift waits where the hint points.</p>
    </div>

    <div style="margin-top:14px">
      <a class="btn" href="index.html">Play again / Restart hunt</a>
    </div>
  </div>

<script>
/* CONFIG ‚Äî replace with your form info */
const FORM_URL = "https://docs.google.com/forms/d/e/FORM_ID/formResponse";
const ENTRY_PAGE = "entry.1234567890";
const ENTRY_TIMESTAMP = "entry.0987654321";
/* ============================== */

const PAGE_INDEX = 5;
const PAGE_NAME = "Final ‚Äî The Truth";

function nowISO(){ return new Date().toISOString(); }
function getProg(){return parseInt(localStorage.getItem('hunt_progress')||'0',10);}
function allowed(){ return getProg() >= PAGE_INDEX-1; }
function logVisit(){
  if(localStorage.getItem('logged_'+PAGE_INDEX)) return;
  localStorage.setItem('logged_'+PAGE_INDEX, nowISO());
  const timestamp = new Date().toLocaleString();
  fetch(FORM_URL + "?" + ENTRY_PAGE + "=" + encodeURIComponent(PAGE_NAME) + "&" + ENTRY_TIMESTAMP + "=" + encodeURIComponent(timestamp), { mode:'no-cors' });
}
(function init(){
  if(!allowed()){
    document.body.innerHTML = `<div style="padding:28px;color:#ffd2a6">
      <h2 style="color:#ff9a66">Hold on ‚Äî you're skipping ahead</h2>
      <p>Please complete the previous clues first.</p>
      <a href="index.html" style="padding:10px 12px;background:#ffd27a;color:#011;border-radius:8px;text-decoration:none;font-weight:700">Begin the hunt</a>
    </div>`;
    return;
  }
  if(PAGE_INDEX > getProg()) localStorage.setItem('hunt_progress', PAGE_INDEX.toString());
  logVisit();

  // small timer header
  const head = document.createElement('div');
  head.style.display='flex';head.style.justifyContent='space-between';head.style.alignItems='center';head.style.margin='0 0 12px 0';
  head.innerHTML = `<div style="font-weight:700">Mystery of Livingston</div><div id="globalTimer" style="font-weight:700">24:00:00</div>`;
  document.body.insertBefore(head, document.body.firstChild);
  function updateTimer(){
    const start = parseInt(localStorage.getItem('hunt_start')||'0',10);
    const el = document.getElementById('globalTimer');
    if(!start){ el.textContent = "24:00:00"; return; }
    const end = start + 24*3600*1000;
    const rem = Math.max(0, end - Date.now());
    const hh = Math.floor(rem/3600000).toString().padStart(2,'0');
    const mm = Math.floor((rem%3600000)/60000).toString().padStart(2,'0');
    const ss = Math.floor((rem%60000)/1000).toString().padStart(2,'0');
    el.textContent = `${hh}:${mm}:${ss}`;
  }
  updateTimer(); setInterval(updateTimer,1000);
})();
</script>
</body>
</html>
